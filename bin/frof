#!/usr/bin/env python

from frof import LocalFrofExecutor, HTTPServerStatusMonitor, OneLineStatusMonitor
import click
import os


@click.command()
@click.argument("frof_file")
@click.option("--max_jobs", "-p", default=None)
@click.option("--status", type=click.Choice(["http", "oneline"]))
def cli_main(frof_file: str, max_jobs: int = None, status: str = "oneline"):
    fe = LocalFrofExecutor(
        os.path.expanduser(frof_file),
        max_jobs=max_jobs,
        status_monitor=(
            HTTPServerStatusMonitor if status == "http" else OneLineStatusMonitor
        ),
    )
    fe.execute()


if __name__ == "__main__":
    cli_main()

